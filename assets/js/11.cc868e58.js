(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{175:function(e,t,a){"use strict";a.r(t);var i=a(0),n=Object(i.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),a("p",[e._v("自Html5普及以来，新加入的标签和功能也开始被流行使用。其中与媒体相关的Video Audio 更是其中最火的几个关键词！\n今天就来说一下最近使用"),a("Video"),e._v("遇到的坑。\n##1. Video 标签属性\nVideo本身的属性并不多，你甚至看他的英文名词都知道这个属性是干什么的。")],1),e._v(" "),e._m(2),e._v(" "),a("p",[e._v("用例及解释都可以去"),a("a",{attrs:{href:"http://www.runoob.com/tags/tag-video.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Video用例"),a("OutboundLink")],1),e._v(" 查看API\n其中有几个未标明属性（坑），主要是与手机兼容相关的！\neg:  playsinline、webkit-playsinline\n"),a("strong",[e._v("问题: 在safari浏览器中，播放后不会自动全屏的问题！")]),e._v(" "),a("strong",[e._v("解决： 加上 上面两个属性可解决")])]),e._v(" "),e._m(3),a("p",[e._v("##2. Video 对象属性\n这个属性就有点多，有时候也会遇到莫名其妙的坑。先来看属性")]),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),a("p",[e._v("很多，不需要全部记住，真的要使用时，再查api 也来得及。接下来说一下坑")]),e._v(" "),a("p",[e._v("####坑1 duration属性")]),e._v(" "),a("p",[e._v("先来看下duration的用法和试例")]),e._v(" "),e._m(6),e._v(" "),a("p",[e._v("看起来非常简单。  但是我们想一下实际的使用情况")]),e._v(" "),e._m(7),e._v(" "),a("p",[e._v("正因为以上两点，src的值与video.play()方法 是一个动态的操作， 这时你会需要拿到视频的总长度，也就是duration。可能该值会是后台传给你的，但如果没有就需要用到 .duration这个属性。")]),e._v(" "),a("p",[e._v("你可能会这样写")]),e._v(" "),e._m(8),a("p",[e._v("....然后给某个标签赋值duration,但却发现是NaN")]),e._v(" "),a("p",[e._v("x.play()是需要时间解析 video.src 上的地址的。那就只有监控 什么时候能拿到了。")]),e._v(" "),a("p",[e._v("Video 的对象、标签、方法都有了，但却缺失了事件")]),e._v(" "),a("p",[e._v("##3. Video的事件")]),e._v(" "),a("p",[a("a",{attrs:{href:"http://www.runoob.com/jsref/event-ondurationchange.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("video的事件"),a("OutboundLink")],1)]),e._v(" "),e._m(9),e._v(" "),a("p",[e._v("你可以使用 其中 ondurationchange、onloademetadata等任何一个事件来监控是否该视频已经准备就位\n这样你就可以准确的拿到duration的值了")]),e._v(" "),e._m(10),a("p",[e._v("还有几个坑容之后更新再说，也还有很多没遇到的坑，以后都在简书更新了！\n欢迎关注我的"),a("a",{attrs:{href:"https://github.com/DaskV",target:"_blank",rel:"noopener noreferrer"}},[e._v("github"),a("OutboundLink")],1),e._v("，不定期更新一些前端玩意")])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"html5-video标签及对象遇到的几个坑"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#html5-video标签及对象遇到的几个坑","aria-hidden":"true"}},[this._v("#")]),this._v(" Html5 Video标签及对象遇到的几个坑")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/5433614-dc15918dfc44bec8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/5433614-ed187df878dd308f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('<video id="video" controls="controls" webkit-playsinline="true">\n    <source src="test.mp4" type="video/mp4" />\n    Your browser does not support HTML5 video.\n</video>\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/5433614-dc15918dfc44bec8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/5433614-ef220dad9915825e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v('定义和用法\nduration 属性返回当前视频的长度，以秒计。\n注意： 不同的浏览器返回不同的值。在以上实例中 Internet Explorer, Firefox 和 Chrome 浏览器返回 "12.612"。 Safari 返回 "12.612000465393066", Opera 12 返回 "12.585215419", 但 Opera 18 返回 "12.62069"。\nvar x = document.getElementById("myVideo").duration;')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("大多数Video 都不会预先播放， 即preload=false, 甚至有人会给标签加上 loaded=true。就是避免视频在用户未点击时，就进入下载缓冲。")]),this._v(" "),t("li",[this._v("但有时，这些属性在某些手机浏览器上是无效的， 那就只有 在Video 标签的src上做手脚。 eg：页面即使加载完毕了，Video 也没有src的值；必须在用户点击播放之后再动态的加上，并开始播放。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('var x = document.getElementById("myVideo")\n x.play().\nvar duration = x.duration;   // duration = NaN\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/5433614-15bb6882f7a2e9e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"QQ图片20170831172620.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("video.play();   \nvideo.ondurationchange=function(){\n  var x  = video.duration\n  ...  \n ///赋值的操作 \n}\n")])])])}],!1,null,null,null);n.options.__file="aboutVideo.md";t.default=n.exports}}]);